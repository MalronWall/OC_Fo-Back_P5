{% extends 'layout.html.twig' %}

{% block content %}
    <header class="container-fluid">
        <div class="row text-center headTitle">
            <div class="col-sm-12 align-self-center">
                <h3>Formulaire de contact</h3>
            </div>
        </div>
    </header>
    <section class="container myForm">
        <form class="needs-validation" method="post" action="{{ path }}contact" novalidate>
            <div class="form-row">
                <div class="col-sm-6 mb-3 mt-2">
                    <label for="lastname">Votre nom</label>
                    <input type="text" name="lastname" class="form-control" id="lastname" placeholder="Nom" required>
                    <div class="invalid-feedback">
                        Veuillez renseigner votre nom !
                    </div>
                </div>
                <div class="col-sm-6 mb-3 mt-2">
                    <label for="firstname">Votre prénom</label>
                    <input type="text" name="firstname" class="form-control" id="firstname" placeholder="Prénom" required>
                    <div class="invalid-feedback">
                        Veuillez renseigner votre prénom !
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="email">Votre adresse email</label>
                <input type="email" name="email" class="form-control" id="email" placeholder="Email" required>
                <div class="invalid-feedback">
                    Veuillez entrer un format valide !
                </div>
            </div>
            <div class="form-group">
                <label for="subject">Votre sujet</label>
                <input type="text" name="subject" class="form-control" id="subject" placeholder="Sujet" required>
                <div class="invalid-feedback">
                    Veuillez renseigner votre un sujet !
                </div>
            </div>
            <div class="form-group">
                <label for="content">Votre contenu</label>
                <textarea class="form-control" name="content" id="content" rows="5" required></textarea>
                <div class="invalid-feedback">
                    Veuillez compléter votre message !
                </div>
            </div>
            {% if server_name != 'localhost' %}
            <div class="form-group">
                <div class="g-recaptcha mt-3" data-sitekey="6Lc0YlMUAAAAALWfhBc7ozK_DaFX9L4BUUAFV8WB" data-callback="onUserSubmit" data-expired-callback="expiredRecaptchaCallback"></div>
                <input type="checkbox" class="form-control captcha-custom-checker d-none" required title="checkboxForRecaptacha">
                <div class="help-block with-errors"></div>
                <div class="invalid-feedback">
                    Veuillez cocher le reCAPTCHA !
                </div>
            </div>
            {% endif %}
            <button class="btn btn-primary mt-1 mb-3" type="submit">Envoyer</button>
        </form>
    </section>
{% endblock %}

{% block javascript %}
// fonction pour valider le captcha (la fonction, data-callback="verifyRecaptchaCallback", intégrée à Bootstrap n'a pas l'air de fonctionner)
const input = document.querySelector(".captcha-custom-checker");
function onUserSubmit(response) {
    input.checked = true;
}
{% endblock %}
